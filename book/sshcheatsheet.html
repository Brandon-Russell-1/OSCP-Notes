<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>SSH Cheat Sheet - Brandon&#x27;s OSCP Notes</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="Introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.</strong> The Things</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="Quick Notes.html"><strong aria-hidden="true">2.1.</strong> Quick Notes</a></li><li class="chapter-item expanded "><a href="Scanning.html"><strong aria-hidden="true">2.2.</strong> Scanning</a></li><li class="chapter-item expanded "><a href="File Transfer.html"><strong aria-hidden="true">2.3.</strong> File Transfer</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="AddnlFileTrasnfer.html"><strong aria-hidden="true">2.3.1.</strong> Additional File Transfer</a></li></ol></li><li class="chapter-item expanded "><a href="Ports.html"><strong aria-hidden="true">2.4.</strong> Ports</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="SSHKeys.html"><strong aria-hidden="true">2.4.1.</strong> SSH Keys</a></li><li class="chapter-item expanded "><a href="sshcheatsheet.html" class="active"><strong aria-hidden="true">2.4.2.</strong> SSH Cheat Sheet</a></li></ol></li><li class="chapter-item expanded "><a href="Shells.html"><strong aria-hidden="true">2.5.</strong> Shells</a></li><li class="chapter-item expanded "><a href="Web Shells.html"><strong aria-hidden="true">2.6.</strong> Web Shells</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.</strong> Gaining Access</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="CrackMapExecCheatSheet.html"><strong aria-hidden="true">3.1.</strong> CrackMapExec Cheat Sheet</a></li><li class="chapter-item expanded "><a href="Impacket.html"><strong aria-hidden="true">3.2.</strong> Impacket</a></li><li class="chapter-item expanded "><a href="RDPEXploit.html"><strong aria-hidden="true">3.3.</strong> RDP Exploits</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.4.</strong> Password Cracking</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="My Hashcat Cheatsheet.html"><strong aria-hidden="true">3.4.1.</strong> Hashcat Cheat Sheet</a></li><li class="chapter-item expanded "><a href="My Hydra Cheatsheet.html"><strong aria-hidden="true">3.4.2.</strong> Hydra Cheat Sheet</a></li><li class="chapter-item expanded "><a href="Bruteforce.html"><strong aria-hidden="true">3.4.3.</strong> Bruteforce</a></li></ol></li><li class="chapter-item expanded "><a href="Buffer Overflow.html"><strong aria-hidden="true">3.5.</strong> Buffer Overflow</a></li><li class="chapter-item expanded "><a href="CMSs.html"><strong aria-hidden="true">3.6.</strong> CMSs</a></li><li class="chapter-item expanded "><a href="File Uploads.html"><strong aria-hidden="true">3.7.</strong> File Uploads</a></li><li class="chapter-item expanded "><a href="AddnlFileUpload.html"><strong aria-hidden="true">3.8.</strong> Additional File Upload</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="htmlfileupload.html"><strong aria-hidden="true">3.8.1.</strong> HTML</a></li><li class="chapter-item expanded "><a href="MyMacros.html"><strong aria-hidden="true">3.8.2.</strong> Macro</a></li><li class="chapter-item expanded "><a href="OLEFileUpload.html"><strong aria-hidden="true">3.8.3.</strong> OLE</a></li></ol></li><li class="chapter-item expanded "><a href="LFIRFI.html"><strong aria-hidden="true">3.9.</strong> LFI/RFI</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="LFIRFIMore.html"><strong aria-hidden="true">3.9.1.</strong> LFIRFI_More</a></li></ol></li><li class="chapter-item expanded "><a href="ShellShock.html"><strong aria-hidden="true">3.10.</strong> Shell Shock</a></li><li class="chapter-item expanded "><a href="Github.html"><strong aria-hidden="true">3.11.</strong> Github</a></li><li class="chapter-item expanded "><a href="MySQL.html"><strong aria-hidden="true">3.12.</strong> SQL</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="MoreSQL.html"><strong aria-hidden="true">3.12.1.</strong> More SQL</a></li><li class="chapter-item expanded "><a href="PSQL.html"><strong aria-hidden="true">3.12.2.</strong> PSQL</a></li><li class="chapter-item expanded "><a href="MyMySql.html"><strong aria-hidden="true">3.12.3.</strong> MySQL</a></li><li class="chapter-item expanded "><a href="MSSQL.html"><strong aria-hidden="true">3.12.4.</strong> MSSQL</a></li></ol></li><li class="chapter-item expanded "><a href="WindowLibraries.html"><strong aria-hidden="true">3.13.</strong> Windows Libraries and APIs</a></li><li class="chapter-item expanded "><a href="XXEXSSDeSerial.html"><strong aria-hidden="true">3.14.</strong> XXE_XSS_Deserialization</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="XXMore.html"><strong aria-hidden="true">3.14.1.</strong> XSS_More</a></li><li class="chapter-item expanded "><a href="XXXEMore.html"><strong aria-hidden="true">3.14.2.</strong> XXE More</a></li><li class="chapter-item expanded "><a href="CSRF.html"><strong aria-hidden="true">3.14.3.</strong> CSRF</a></li><li class="chapter-item expanded "><a href="SSRF.html"><strong aria-hidden="true">3.14.4.</strong> SSRF</a></li></ol></li><li class="chapter-item expanded "><a href="DirectoryTraveral.html"><strong aria-hidden="true">3.15.</strong> Directory Traversal</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.</strong> Linux PrivEsc</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="LinuxEnum.html"><strong aria-hidden="true">4.1.</strong> Enumeration</a></li><li class="chapter-item expanded "><a href="LinuxPrivExploit.html"><strong aria-hidden="true">4.2.</strong> Exploit</a></li><li class="chapter-item expanded "><a href="S1RENLinNotes.html"><strong aria-hidden="true">4.3.</strong> S1REN's Notes</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.</strong> Windows PrivEsc</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="WinPrivEnum.html"><strong aria-hidden="true">5.1.</strong> Enumeration</a></li><li class="chapter-item expanded "><a href="WinPrivExploit.html"><strong aria-hidden="true">5.2.</strong> Exploit</a></li><li class="chapter-item expanded "><a href="S1RENWinNotes.html"><strong aria-hidden="true">5.3.</strong> S1REN's Notes</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.</strong> Active Directory</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="KerberosCheetSheet.html"><strong aria-hidden="true">6.1.</strong> Kerberos Cheat Sheet</a></li><li class="chapter-item expanded "><a href="WeGotUsersbutnoPass.html"><strong aria-hidden="true">6.2.</strong> We got Users but no Pass?</a></li><li class="chapter-item expanded "><a href="ADEnum.html"><strong aria-hidden="true">6.3.</strong> Enumeration</a></li><li class="chapter-item expanded "><a href="ADAuth.html"><strong aria-hidden="true">6.4.</strong> Authentication</a></li><li class="chapter-item expanded "><a href="ADPivoting.html"><strong aria-hidden="true">6.5.</strong> Pivoting</a></li><li class="chapter-item expanded "><a href="ADLateralMovement.html"><strong aria-hidden="true">6.6.</strong> Lateral Movement</a></li><li class="chapter-item expanded "><a href="ADHashDump.html"><strong aria-hidden="true">6.7.</strong> Hash Dumping</a></li><li class="chapter-item expanded "><a href="ADPersistence.html"><strong aria-hidden="true">6.8.</strong> Persistence</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Brandon&#x27;s OSCP Notes</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <p>https://www.stationx.net/ssh-commands-cheat-sheet/</p>
<h2 id="what-is-ssh"><a class="header" href="#what-is-ssh">What Is SSH?</a></h2>
<p>SSH (short for “Secure Shell” or “Secure Socket Shell”) is a network protocol for accessing network services securely over unsecured networks. It includes the suite of utilities implementing it, such as:</p>
<ul>
<li><strong>ssh-keygen:</strong> for creating new authentication key pairs for SSH;</li>
<li><strong>SCP</strong> (Secure Copy Protocol): for copying files between hosts on a network;</li>
<li><strong>SFTP</strong> (Secure File Transfer Protocol): for sending and receiving files. It’s an SSH-secured version of FTP (File Transfer Protocol), and it has replaced FTP and FTPS (FTP Secure) as the preferred mechanism for file sharing over the Internet.</li>
</ul>
<p>An SSH server, by default, listens for connections on the standard Transmission Control Protocol (TCP) <a href="https://www.stationx.net/common-ports-cheat-sheet/">port 22</a>. Your applications may listen for SSH connections on other ports.</p>
<p>SSH lets you securely manage remote systems and applications, such as logging in to another computer over a network, executing commands, and moving files from one computer to another. An advanced SSH functionality is the creation of secure tunnels to run other application protocols remotely.</p>
<h2 id="ssh-cheat-sheet-search"><a class="header" href="#ssh-cheat-sheet-search">SSH Cheat Sheet Search</a></h2>
<p>Search our SSH cheat sheet to find the right cheat for the term you're looking for. Simply enter the term in the search bar, and you'll receive the matching cheats available.</p>
<h2 id="port-knocking"><a class="header" href="#port-knocking">Port Knocking</a></h2>
<p>Find the knockd file, then hit that sequence</p>
<pre><code>http://192.168.208.209/welcome.php?file=../../../../../../../etc/knockd.conf

Example from DC-9 Box on PG:

[options] UseSyslog [openSSH] sequence = 7469,8475,9842 seq_timeout = 25 command = /sbin/iptables -I INPUT -s %IP% -p tcp --dport 22 -j ACCEPT tcpflags = syn [closeSSH] sequence = 9842,8475,7469 seq_timeout = 25 command = /sbin/iptables -D INPUT -s %IP% -p tcp --dport 22 -j ACCEPT tcpflags = syn 



Run this script:

for x in 7469 8475 9842; do
	nmap -Pn --host-timeout 201 --max-retries 0 -p $x $ip;
done
</code></pre>
<h2 id="basic-ssh-commands"><a class="header" href="#basic-ssh-commands">Basic SSH Commands</a></h2>
<p>The following are fundamental SSH commands. Commit as many to memory as you can.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>COMMAND</strong></th><th><strong>DESCRIPTION</strong></th></tr></thead><tbody>
<tr><td><strong><code>ssh</code></strong></td><td><strong>Connect to a remote server</strong></td></tr>
<tr><td><code>ssh pi@raspberry</code></td><td>Connect to the device <code>raspberry</code> on the default SSH port 22 as user <code>pi</code></td></tr>
<tr><td><code>ssh pi@raspberry -p 3344</code></td><td>Connect to the device <code>raspberry</code> on a specific port 3344 as user <code>pi</code></td></tr>
<tr><td><code>ssh -i /path/file.pem admin@192.168.1.1</code></td><td>Connect to <code>root@192.168.1.1</code> via the key file <code>/path/file.pem</code> as user <code>admin</code></td></tr>
<tr><td><code>ssh root@192.168.2.2 'ls -l'</code></td><td>Execute remote command <code>ls -l</code> on <code>192.168.2.2</code> as user <code>root</code></td></tr>
<tr><td><code>$ ssh user@192.168.3.3 bash &lt; script.sh</code></td><td>Invoke the script <code>script.sh</code> in the current working directory spawning the SSH session to <code>192.168.3.3</code> as user <code>user</code></td></tr>
<tr><td><code>ssh friend@Best.local "tar cvzf - ~/ffmpeg" &gt; output.tgz</code></td><td>Compress the <code>~/ffmpeg</code> directory and download it from a server <code>Best.local</code> as user <code>friend</code></td></tr>
<tr><td><strong><code>ssh-keygen</code></strong></td><td><strong>Generate SSH keys (follow the prompts)</strong></td></tr>
<tr><td><code>ssh-keygen -F [ip/hostname]</code></td><td>Search for some IP address or hostname from <code>~/.ssh/known_hosts</code> (logged-in host)</td></tr>
<tr><td><code>ssh-keygen -R [ip/hostname]</code></td><td>Remove some IP address or hostname from <code>~/.ssh/known_hosts</code> (logged-in host)</td></tr>
<tr><td><code>ssh-keygen -f ~/.ssh/filename</code></td><td>Specify file name</td></tr>
<tr><td><code>ssh-keygen -y -f private.key &gt; public.pub</code></td><td>Generate public key from private key</td></tr>
<tr><td><code>ssh-keygen -c -f ~/.ssh/id_rsa</code></td><td>Change the comment of the key file <code>~/.ssh/id_rsa</code></td></tr>
<tr><td><code>ssh-keygen -p -f ~/.ssh/id_rsa</code></td><td>Change passphrase of private key <code>~/.ssh/id_rsa</code></td></tr>
<tr><td><code>ssh-keygen -t rsa -b 4096 -C "my@email.com"</code></td><td>Generate an RSA 4096-bit key with “<code>my@email.com</code>” as a comment:  <br><code>-t</code>: Type of key (<code>rsa, ed25519, dsa, ecdsa</code>)  <br><code>-b</code>: The number of bits in the key  <br><code>-C</code>: Provides a new comment</td></tr>
<tr><td><strong><code>scp</code></strong></td><td><strong>Copy files securely between servers</strong></td></tr>
<tr><td><code>scp user@server:/folder/file.ext dest/</code></td><td>Copy from remote to local destination <code>dest/</code></td></tr>
<tr><td><code>scp dest/file.ext user@server:/folder</code></td><td>Copy from local to remote</td></tr>
<tr><td><code>scp user1@server1:/file.ext user2@server2:/folder</code></td><td>Copy between two different servers</td></tr>
<tr><td><code>scp user@server:/folder/* .</code></td><td>Copies from a server folder to the current folder on the local machine</td></tr>
<tr><td><code>scp -r</code></td><td>Recursively copy entire directories</td></tr>
<tr><td><code>scp -r user@server:/folder dest/</code></td><td>Copy the entire folder to the local destination <code>dest/</code></td></tr>
<tr><td><code>scp user@server:/folder/* dest/</code></td><td>Copy all files from a folder to the local destination <code>dest/</code></td></tr>
<tr><td><code>scp -C</code></td><td>Option to compress data</td></tr>
<tr><td><code>scp -v</code></td><td>Option to print verbose info</td></tr>
<tr><td><code>scp -p</code></td><td>Option to preserve the last modification timestamps of the transferred files</td></tr>
<tr><td><code>scp -P 8080</code></td><td>Option to connect to remote host port 8080</td></tr>
<tr><td><code>scp -B</code></td><td>Option for <a href="https://www.thegeekstuff.com/2009/10/how-to-execute-ssh-and-scp-in-batch-mode-only-when-passwordless-login-is-enabled/">batch mode</a> and prevent you from entering passwords or passphrases</td></tr>
<tr><td><strong><code>sftp</code></strong></td><td><strong>Securely transfer files between servers</strong></td></tr>
<tr><td><code>sftp -p</code></td><td>Option to preserve the last modification timestamps of the transferred files</td></tr>
<tr><td><code>sftp -P 8080</code></td><td>Option to connect to remote host port 8080</td></tr>
<tr><td><code>sftp -r</code></td><td>Recursively copy entire directories when uploading and downloading. SFTP doesn’t follow symbolic links encountered in the tree traversal.</td></tr>
</tbody></table>
</div>
<p><strong>Download the PDF Version of This SSH Commands Cheat Sheet!</strong></p>
<p>Want to keep this cheat sheet at your fingertips? Just enter your email address, and we’ll send a PDF copy to your inbox.</p>
<p><strong>DOWNLOAD →</strong></p>
<h2 id="ssh-configurations-and-options"><a class="header" href="#ssh-configurations-and-options">SSH Configurations and Options</a></h2>
<p>Have you ever wondered how SSH remembers your login credentials for various machines? This section is a brief reference on how to do so.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>COMMAND</strong></th><th><strong>DESCRIPTION</strong></th></tr></thead><tbody>
<tr><td><strong><code>man ssh_config</code></strong></td><td><strong>Open OpenSSH SSH client configuration files.</strong> This manual lists all the OpenSSH parameters you can change.</td></tr>
<tr><td><code>cat /etc/ssh/ssh_config | less</code></td><td>View your OpenSSH client system-wide configuration file</td></tr>
<tr><td><code>cat /etc/ssh/sshd_config | less</code></td><td>View your OpenSSH server system-wide configuration file; the “d” stands for the server “daemon”</td></tr>
<tr><td><code>cat ~/.ssh/config | less</code></td><td>View your SSH client user-specific configuration file</td></tr>
<tr><td><code>cat ~/.ssh/id_{type} | less</code></td><td>View your SSH client private key; <code>type</code> is any of <code>rsa, ed25519, dsa, ecdsa</code>.</td></tr>
<tr><td><code>cat ~/.ssh/id_{type}.pub | less</code></td><td>View your SSH client public key; <code>type</code> is any of <code>rsa, ed25519, dsa, ecdsa</code>.</td></tr>
<tr><td><code>cat ~/.ssh/known_hosts | less</code></td><td>View your SSH client logged-in hosts</td></tr>
<tr><td><code>cat ~/.ssh/authorized_keys | less</code></td><td>View your SSH client authorized login keys</td></tr>
<tr><td><strong><code>ssh-agent</code></strong></td><td><strong>Hold private SSH keys used for public key authentication (RSA, DSA, ECDSA, Ed25519)</strong></td></tr>
<tr><td><code>ssh-agent -E fingerprint_hash</code></td><td>Specify the hash algorithm used when displaying key fingerprints.  <br>Valid <code>fingerprint_hash</code> options are <code>sha256</code> (default) and <code>md5</code>.</td></tr>
<tr><td><code>ssh-agent -t lifetime</code></td><td>Set up a maximum <code>lifetime</code> for identities/private keys, overwritable by the same setting in <code>ssh-add</code>.   <br>Examples of lifetime:  <br>• <code>600</code> = 600 seconds (10 minutes)  <br>• <code>23m</code> = 23 minutes  <br>• <code>1h45</code> = 1 hour 45 minutes</td></tr>
<tr><td><strong><code>ssh-add</code></strong></td><td><strong>Add SSH keys to the <code>ssh-agent</code></strong></td></tr>
<tr><td><code>ssh-add -l</code></td><td>List your private keys cached by <code>ssh-agent</code></td></tr>
<tr><td><code>ssh-add -t lifetime</code></td><td>Set up a maximum <code>lifetime</code> for identities/private keys.  <br>Examples of <code>lifetime</code>:  <br>• <code>600</code> = 600 seconds (10 minutes)  <br>• <code>23m</code> = 23 minutes  <br>• <code>1h45</code> = 1 hour 45 minutes</td></tr>
<tr><td><code>ssh-add -L</code></td><td>List the public key parameters of all saved identities</td></tr>
<tr><td><code>ssh-add -D</code></td><td>Delete all cached private keys</td></tr>
<tr><td><strong><code>ssh-copy-id</code></strong></td><td><strong>Copy, install, and configure SSH keys on a remote server</strong></td></tr>
<tr><td><code>ssh-copy-id user@server</code></td><td>Copy SSH keys to a <code>server</code> as a <code>user</code></td></tr>
<tr><td><code>ssh-copy-id server1</code></td><td>Copy to some alias server <code>server1</code> with the default login</td></tr>
<tr><td><code>ssh-copy-id -i ~/.ssh/id_rsa.pub user@server</code></td><td>Copy a specific key to a <code>server</code> as a <code>user</code></td></tr>
</tbody></table>
</div>
<h2 id="remote-server-management"><a class="header" href="#remote-server-management">Remote Server Management</a></h2>
<p>The operating systems of SSH servers are mostly Unix/Linux, so once you’ve logged in to a server via SSH, the following commands are largely the same as their counterparts in Unix/Linux. Check out our <a href="https://www.stationx.net/unix-commands-cheat-sheet/">Unix commands cheat sheet</a> and <a href="https://www.stationx.net/linux-command-line-cheat-sheet/">Linux command line cheat sheet</a> for other file management commands applicable to SSH.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>COMMAND</strong></th><th><strong>DESCRIPTION</strong></th></tr></thead><tbody>
<tr><td><code>cd</code></td><td>Change the current working directory</td></tr>
<tr><td><code>kill</code></td><td>Stop a running process</td></tr>
<tr><td><code>ls</code></td><td>List files and directories</td></tr>
<tr><td><code>mkdir</code></td><td>Create a new directory</td></tr>
<tr><td><code>mv</code></td><td>Move files or directories</td></tr>
<tr><td><code>nano</code></td><td>Edit a file in the terminal using Nano</td></tr>
<tr><td><code>ps</code></td><td>List running processes</td></tr>
<tr><td><code>pwd</code></td><td>Display the current working directory</td></tr>
<tr><td><code>tail</code></td><td>View the last few (10, by default) lines of a file</td></tr>
<tr><td><code>top</code></td><td>Monitor system resources and processes</td></tr>
<tr><td><code>touch</code></td><td>Create a new file or update the timestamp of an existing file</td></tr>
<tr><td><code>vim</code></td><td>Edit a file in the terminal using Vim</td></tr>
<tr><td><code>exit</code></td><td>Close the SSH session</td></tr>
</tbody></table>
</div>
<p><a href="https://www.stationx.net/wp-content/uploads/2023/05/1.-Using-PowerShell-to-access-a-lab-account-on-a-network-computer-via-SSH-on-Windows-10.png"><img src="https://www.stationx.net/wp-content/uploads/2023/05/1.-Using-PowerShell-to-access-a-lab-account-on-a-network-computer-via-SSH-on-Windows-10.png" alt="Using PowerShell to access a lab account on a network computer via SSH on Windows 10" title="Using PowerShell to access SSH on Windows 10" /></a></p>
<p><em>Using PowerShell to access a lab account on a network computer via SSH on Windows 10</em></p>
<h2 id="advanced-ssh-commands"><a class="header" href="#advanced-ssh-commands">Advanced SSH Commands</a></h2>
<p>This table lists some complex SSH utilities that can help with network administration tasks: SSH File System (SSHFS), data compression, and X11 forwarding.</p>
<p>To conduct X11 forwarding over SSH, do these three things:</p>
<ol>
<li>Set up your client (<code>~/.ssh/config</code>) to forward X11 by setting these parameters:<br />
<code>Host *</code><br />
<code>ForwardAgent yes   ForwardX11 yes</code></li>
<li>Set up your server (<code>/etc/ssh/sshd_config</code>) to allow X11 by setting these parameters:<br />
<code>X11Forwarding yes   X11DisplayOffset 10   X11UseLocalhost no</code></li>
<li>Set up X11 authentication on your server by installing <code>xauth</code>.</li>
</ol>
<div class="table-wrapper"><table><thead><tr><th><strong>COMMAND</strong></th><th><strong>DESCRIPTION</strong></th></tr></thead><tbody>
<tr><td><code>sshfs</code></td><td>Mount a remote server’s file system on a local directory.  <br>Remember to <a href="https://phoenixnap.com/kb/sshfs">install</a> this program onto your machine before use. Example installation commands:  <br><code>• sudo apt install sshfs # Ubuntu/Debian   • sudo yum install fuse-sshfs # CentOS</code>  <br>Learn to install apps on various Linux distributions <a href="https://www.stationx.net/linux-command-line-cheat-sheet/#installing-new-programs">here</a>.</td></tr>
<tr><td><code>ssh -C hostname</code></td><td>Compress SSH traffic to improve performance on slow connections.  <br>Alternatively, insert <code>Compression yes</code> into your SSH <a href="https://www.stationx.net/ssh-commands-cheat-sheet/#SSHConfigurationsandOptions">configuration files</a>.</td></tr>
<tr><td><code>ssh -o "Compression yes" -v hostname</code></td><td>An alternative method to compress SSH traffic to improve performance on slow connections.  <br>This is the same as inserting <code>Compression yes</code> into your SSH <a href="https://www.stationx.net/ssh-commands-cheat-sheet/#SSHConfigurationsandOptions">configuration files</a>.</td></tr>
<tr><td><code>ssh -X user@server</code></td><td>Enable X11 forwarding over SSH: forward graphical applications from a remote <code>server</code> as a <code>user</code> to a local machine.</td></tr>
<tr><td><code>ssh -o ForwardX11=yes user@server</code></td><td>Enable X11 forwarding over SSH: forward graphical applications from a remote <code>server</code> as a <code>user</code> to a local machine.</td></tr>
<tr><td><code>ssh -x</code></td><td>Disable X11 forwarding</td></tr>
<tr><td><code>ssh -Y</code></td><td>Enable trusted X11 forwarding. This option is riskier than <code>ssh -X</code> as it forwards the entire display of the SSH server to the client.</td></tr>
</tbody></table>
</div>
<p><strong>Download the PDF Version of This SSH Commands Cheat Sheet!</strong></p>
<p>Want to keep this cheat sheet at your fingertips? Just enter your email address, and we’ll send a PDF copy to your inbox.</p>
<p><strong>DOWNLOAD →</strong></p>
<h2 id="tunneling"><a class="header" href="#tunneling">Tunneling</a></h2>
<p>These SSH command line options create secure tunnels.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>OPTIONS</strong></th><th><strong>DESCRIPTION</strong></th><th><strong>SYNTAX / EXAMPLE</strong></th></tr></thead><tbody>
<tr><td><code>-L</code></td><td>Local port forwarding: forward a port on the local machine (SSH client) to a port on the remote machine (<code>ssh_server</code> as <code>user</code>), the traffic of which goes to a port on the <code>destination</code> machine.  <br>The parameters <code>local_port</code> and <code>remote_port</code> can match.</td><td><code>ssh user@ssh_server -L local_port:destination:remote_port   # Examplessh root@192.168.0.1 -L 2222:10.0.1.5:3333</code></td></tr>
<tr><td><code>-J</code></td><td>ProxyJump; ensure that traffic passing through the intermediate/bastion hosts is always encrypted end-to-end.  <br>ProxyJump is how you use bastion hosts to connect to a remote host with a single command.</td><td><code>ssh -J proxy_host1 remote_host2   ssh -J user@proxy_host1 user@remote_host2   # Multiple bastion hosts/jumpsssh -J user@proxy_host1:port1,user@proxy_host2:port2 user@remote_host3</code></td></tr>
<tr><td><code>-R</code></td><td>Remote port forwarding: forward a port <code>remote_port</code> on the remote machine (<code>ssh_server</code> as <code>user</code>) to a port on the local machine (SSH client), the traffic of which goes to a port <code>destination_port</code> on the <code>destination</code> machine.  <br>An empty <code>remote</code> means the remote SSH server will bind on all interfaces.  <br>Additional SSH options in the example:  <br><code>-N</code>: don’t execute remote commands; useful for dedicated port forwarding  <br><code>-f</code>: run SSH in the background.</td><td><code>ssh -R [remote:]remote_port:destination:destination_port [user@]ssh_server   # Examplessh -R 8080:192.168.3.8:3030 -N -f user@remote.host</code></td></tr>
<tr><td><code>-D</code></td><td>Set up a SOCKS Proxy to tunnel traffic from a <code>remote_host</code> on which you’re the <code>user</code> to a <code>local_port_number</code>.  <br>Additional SSH options in the example:  <br><code>-q</code>: quiet mode; don’t output anything locally  <br><code>-C</code>: compress data in the tunnel, save bandwidth  <br><code>-N</code>: don’t execute remote commands; useful for dedicated port forwarding  <br><code>-f</code>: run SSH in the background.</td><td><code>ssh -D local_port_number user@remote_host   # Examplessh -D 6677 -q -C -N -f me@192.168.5.5</code></td></tr>
</tbody></table>
</div>
<h3 id="ssh-tunneling-demonstration"><a class="header" href="#ssh-tunneling-demonstration">SSH Tunneling Demonstration</a></h3>
<p>Let’s show you two ways to pipe traffic from your router into Wireshark and monitor your network activity. The first demonstration involves installing programs onto a system used as a router; the second, without.</p>
<h4 id="using-django"><a class="header" href="#using-django">Using Django</a></h4>
<p><img src="https://www.stationx.net/wp-content/uploads/2023/05/2.-SSH-Tunneling-Demo.png.png" alt="SSH Tunneling Demo" title="SSH Tunneling Demo - Django" /></p>
<p>As a demonstration, we’re piping traffic from a router into <a href="https://www.stationx.net/wireshark-cheat-sheet/">Wireshark</a>, so that we can monitor live web traffic through an SSH tunnel. (The router below is a macOS computer hosting a Kali Linux virtual machine using the Wireshark instance installed on the latter.)</p>
<p>The setup is as follows:</p>
<ol>
<li><strong>On the router:</strong> Enable remote access via SSH. (NOTE: On the macOS system, go to <strong>System Preferences</strong> &gt; <strong>Sharing</strong> &gt; turn on <strong>Remote Login</strong> and note the login username and hostname. For your router setup, check your specific manufacturer's guide to enable remote access via SSH.)</li>
<li><strong>On the router:</strong> <a href="https://docs.djangoproject.com/en/4.2/intro/tutorial01/">Install Python Django</a> and start up the Django template server on <a href="http://127.0.0.1:8000/">http://127.0.0.1:8000</a> using the Terminal command string <code>django-admin startproject mysite; cd mysite; python manage.py runserver</code> (or <code>python3 manage.py runserver</code>). Note the Django web app uses port 8000.</li>
<li><strong>On Kali Linux:</strong> execute this command to listen on port 8080: <code>ls | nc -l -p 8080</code></li>
<li><strong>On Kali Linux:</strong> execute this command in a different Terminal tab/window. Below, <code>8000</code> is the router’s Django port, <code>8080</code> is the Kali Linux listening port on <code>localhost</code>, and the command involves remote port forwarding (<code>-R</code>): <code>sudo ssh -R 8000:localhost:8080 user@router_ip</code></li>
<li><strong>On Kali Linux:</strong> start Wireshark and select the loopback interface (<code>lo</code>) as the capture device. Wireshark should be sniffing packets on <code>lo</code> now.</li>
<li><strong>On the router:</strong> visit <a href="http://127.0.0.1:8000/">http://127.0.0.1:8000</a> in a web browser. (Note <code>localhost</code> and 127.0.0.1 are equivalent.) The Django server wouldn’t load; it freezes instead because of the rerouted traffic.</li>
<li><strong>On Kali Linux:</strong> You should expect the following results:</li>
</ol>
<p><a href="https://www.stationx.net/wp-content/uploads/2023/05/3.-Piping-traffic-of-Django-web-app-http127.0.0.18000-on-the-macOS-router-into-the-Wireshark-instance-on-Kali-Linux.png"><img src="https://www.stationx.net/wp-content/uploads/2023/05/3.-Piping-traffic-of-Django-web-app-http127.0.0.18000-on-the-macOS-router-into-the-Wireshark-instance-on-Kali-Linux.png" alt="Piping traffic of Django web app http127.0.0.18000 on the macOS router into the Wireshark instance on Kali Linux" title="SSH piping router traffic into Wireshark" /></a></p>
<p><em>Piping traffic of Django web app <a href="http://127.0.0.1:8000/">http://127.0.0.1:8000</a> on the macOS router into the Wireshark instance on Kali Linux</em></p>
<p><a href="https://www.stationx.net/wp-content/uploads/2023/05/4.-Wireshark-HTTP-packet-corresponding-to-the-Django-web-app-on-the-router.png"><img src="https://www.stationx.net/wp-content/uploads/2023/05/4.-Wireshark-HTTP-packet-corresponding-to-the-Django-web-app-on-the-router.png" alt="Wireshark HTTP packet corresponding to the Django web app on the router" title="SSH Wireshark HTTP packet" /></a></p>
<p><em>Wireshark HTTP packet corresponding to the Django web app on the router</em></p>
<p><strong>Download the PDF Version of This SSH Commands Cheat Sheet!</strong></p>
<p>Want to keep this cheat sheet at your fingertips? Just enter your email address, and we’ll send a PDF copy to your inbox.</p>
<p><strong>DOWNLOAD →</strong></p>
<h4 id="using-tcpdump"><a class="header" href="#using-tcpdump">Using tcpdump</a></h4>
<p><img src="https://www.stationx.net/wp-content/uploads/2023/05/5.-SSH-Tunneling-Demo.png" alt="SSH Tunneling Demo" title="SSH Tunneling Demo - tcpdump" /></p>
<p>The following is an alternative method for capturing remote web traffic passing through a router.</p>
<p>In Kali Linux, you’ll log in to your router via SSH, capture packets with the command-line packet capturing tool <a href="https://www.stationx.net/tcpdump-cheat-sheet/">tcpdump</a>, and pipe the traffic into Wireshark.</p>
<p>Here is the required command with the option flags explained:</p>
<p><code>ssh [username]@[hostname/ip] tcpdump -U -s 65525 -w - 'not port 22' | wireshark -k -i -</code></p>
<ul>
<li><code>-U</code>: No buffering. Produce real-time output.</li>
<li><code>-s 65525</code>: Grab 65525 bytes of data from each packet rather than the default of 262144 bytes. 65525 is the <a href="https://wiki.wireshark.org/MTU.md">maximum transmission unit of a Point-to-Point Protocol packet</a> that Wireshark can handle. Adjust this number as you see fit.</li>
<li><code>-w</code>: Write each packet to the output packet capture file on your local disk in Kali Linux. Combining <code>-U</code> and <code>-w</code> means tcpdump writes to your output file as the packets pour in, rather than until the memory buffer fills up.</li>
<li><code>'not port 22'</code>: This is to prevent tcpdump from echoing the SSH packets sent between your machine and the router.</li>
<li><a href="https://explainshell.com/explain?cmd=wireshark+-k+-i+-"><code>-k -i -</code></a>: Start the capture immediately and use the command before the pipe character (<code>|</code>) as the capture interface.</li>
</ul>
<p><a href="https://www.stationx.net/wp-content/uploads/2023/05/6.-Example-of-piping-router-traffic-to-Wireshark-via-tcpdump.png"><img src="https://www.stationx.net/wp-content/uploads/2023/05/6.-Example-of-piping-router-traffic-to-Wireshark-via-tcpdump.png" alt="Example of piping router traffic to Wireshark via tcpdump" title="Example of piping router traffic to Wireshark via tcpdump: ssh root@192.168.1.1 tcpdump -U -s 65525 -w - &#39;not port 22&#39; | wireshark -k -i -" /></a></p>
<p><em>Example of piping router traffic to Wireshark via tcpdump</em></p>
<p>After executing the command above, Wireshark opens:</p>
<p><a href="https://www.stationx.net/wp-content/uploads/2023/05/7.-After-executing-the-command-above.png"><img src="https://www.stationx.net/wp-content/uploads/2023/05/7.-After-executing-the-command-above.png" alt="After executing the command above" title="After executing the command above, Wireshark opens" /></a></p>
<p><a href="https://www.stationx.net/wp-content/uploads/2023/05/8.-Wireshark-triggered.png"><img src="https://www.stationx.net/wp-content/uploads/2023/05/8.-Wireshark-triggered.png" alt="Wireshark triggered" title="Wireshark triggered" /></a></p>
<p><em>Wireshark triggered</em></p>
<p>Next, the SSH client will prompt you to input your router password. Pasting it suffices:</p>
<p><a href="https://www.stationx.net/wp-content/uploads/2023/05/9.-SSH-client-will-prompt-you.png"><img src="https://www.stationx.net/wp-content/uploads/2023/05/9.-SSH-client-will-prompt-you.png" alt="SSH client will prompt you" title="Pasting router SSH password" /></a></p>
<p>SSH login successful. Now, tcpdump packet capture begins:</p>
<p><a href="https://www.stationx.net/wp-content/uploads/2023/05/10.-tcpdump-packet-capture-begins.png"><img src="https://www.stationx.net/wp-content/uploads/2023/05/10.-tcpdump-packet-capture-begins.png" alt="tcpdump packet capture begins" title="SSH login success. Now, tcpdump packet capture begins." /></a></p>
<p>Meanwhile, Wireshark receives the piped traffic from tcpdump:</p>
<p><a href="https://www.stationx.net/wp-content/uploads/2023/05/11.-Wireshark-receives-the-piped-traffic-from-tcpdump.png"><img src="https://www.stationx.net/wp-content/uploads/2023/05/11.-Wireshark-receives-the-piped-traffic-from-tcpdump.png" alt="Wireshark receives the piped traffic from tcpdump" title="Meanwhile Wireshark receives the piped traffic from tcpdump" /></a></p>
<p>That’s it.</p>
<h2 id="conclusion"><a class="header" href="#conclusion">Conclusion</a></h2>
<p>We have covered SSH, SCP, SFTP, SSH configuration commands such as <code>ssh-agent</code>, <code>ssh-add</code>, and <code>ssh-copy-id</code>, and various SSH tunneling commands.</p>
<p>Here are some tips for using SSH more efficiently and securely:</p>
<ul>
<li>Disable X11 and TCP forwarding because attackers can use such weaknesses to access other systems on your network. Change the options on <code>sshd_config</code> to be <code>AllowTcpForwarding no</code> and <code>X11Forwarding no</code>.</li>
<li>Change the default options on <code>sshd_config</code>, such as <a href="https://www.techrepublic.com/article/tips-securing-ssh-linux-servers/">changing the default port</a> from 22 to another number.</li>
<li>Authenticate clients using SSH certificates created with <code>ssh-keygen</code>.</li>
<li>Use a bastion host with the help of <a href="https://www.stationx.net/ssh-commands-cheat-sheet/#Tunneling">tunneling</a> commands.</li>
<li>Restrict SSH logins to specific IPs, such as adding user filtering with the <code>AllowUsers</code> option in <code>sshd_config</code>.</li>
</ul>
<p>Thanks to its security measures and the ubiquity of networking tasks, SSH is indispensable for computer data communications. Hence every student and professional in IT and cyber security needs a working knowledge of SSH commands, and we hope this SSH cheat sheet is a good starter or refresher for you.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="SSHKeys.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="Shells.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="SSHKeys.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="Shells.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
